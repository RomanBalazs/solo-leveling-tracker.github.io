:root{
  --bg:#0b0f17;
  --panel:#0f1624;
  --card:#0d1421;
  --text:#e7eefc;
  --muted:#a9b6d3;
  --line:#1b2942;
  --accent:#7c5cff;
  --good:#3ce6a5;
  --warn:#ffcc66;
  --bad:#ff5c7a;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius: 18px;
  --radius2: 14px;
  --pad: 14px;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: var(--sans);
  color: var(--text);
  background: radial-gradient(900px 600px at 20% 10%, rgba(124,92,255,.20), transparent 60%),
              radial-gradient(700px 500px at 85% 25%, rgba(60,230,165,.12), transparent 60%),
              var(--bg);
}
a{color:inherit}
.topbar{
  position: sticky;
  top:0;
  z-index: 20;
  background: rgba(11,15,23,.80);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--line);
  padding: 14px 14px 10px;
}
.brand{
  display:flex;
  gap:12px;
  align-items:center;
  margin-bottom:10px;
}
.badge{
  font-family: var(--mono);
  font-size: 12px;
  letter-spacing: .14em;
  padding: 6px 10px;
  border: 1px solid rgba(124,92,255,.45);
  border-radius: 999px;
  color: #d8d1ff;
  background: rgba(124,92,255,.10);
}

.systemLogo{
  width:44px;
  height:44px;
  padding:0;
  border-radius:50%;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}
.systemLogoImg{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

.title .h1{font-weight:800; font-size:16px}
.title .h2{color:var(--muted); font-size:12px}
.tabs{
  display:flex;
  gap:8px;
  flex-wrap: wrap;
}
.tab{
  border:1px solid var(--line);
  background: rgba(15,22,36,.75);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 999px;
  cursor:pointer;
  font-weight:700;
  font-size: 13px;
}
.tab.active{
  border-color: rgba(124,92,255,.55);
  background: rgba(124,92,255,.15);
}
.container{
  max-width: 1200px;
  margin: 0 auto;
  padding: 16px 14px 60px;
}
.view{display:none}
.view.active{display:block}
.grid{
  display:grid;
  grid-template-columns: 1fr;
  gap: 14px;
}
@media(min-width: 980px){
  .grid{
    grid-template-columns: 1.1fr 1.1fr;
  }
  #view-profile .grid .card:nth-child(1){grid-column: 1/2}
  #view-profile .grid .card:nth-child(2){grid-column: 2/3}
  #view-profile .grid .card:nth-child(3){grid-column: 1/2}
  #view-profile .grid .card:nth-child(4){grid-column: 2/3}
}
.card{
  background: linear-gradient(180deg, rgba(15,22,36,.85), rgba(13,20,33,.85));
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: var(--pad);
  box-shadow: var(--shadow);
}
.cardTitle{
  font-weight: 900;
  letter-spacing: .02em;
  margin-bottom: 10px;
}
.row{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap: wrap;
}
.row.space{justify-content: space-between}
.pill{
  font-family: var(--mono);
  font-size: 12px;
  color: var(--muted);
  border:1px solid var(--line);
  background: rgba(11,15,23,.45);
  padding: 7px 10px;
  border-radius: 999px;
}
.progress{margin-top: 8px}
.progressLabel{
  display:flex; justify-content: space-between;
  color: var(--muted);
  font-size: 12px;
  margin-bottom: 6px;
}
.bar{
  width:100%;
  height: 12px;
  background: rgba(27,41,66,.55);
  border:1px solid var(--line);
  border-radius: 999px;
  overflow:hidden;
}
.fill{
  height:100%;
  background: linear-gradient(90deg, rgba(124,92,255,.9), rgba(60,230,165,.85));
}
.divider{
  height:1px;
  background: var(--line);
  margin: 12px 0;
}
.btn{
  border:1px solid rgba(124,92,255,.45);
  background: rgba(124,92,255,.14);
  color: #efeaff;
  padding: 10px 12px;
  border-radius: 12px;
  cursor:pointer;
  font-weight: 800;
}
.btn:hover{filter: brightness(1.1)}
.btn.ghost{
  border-color: var(--line);
  background: rgba(15,22,36,.55);
  color: var(--muted);
}
.btn.small{
  padding: 7px 10px;
  border-radius: 10px;
  font-weight: 900;
}
.stats{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 10px;
}
.stat{
  border:1px solid var(--line);
  background: rgba(11,15,23,.35);
  border-radius: var(--radius2);
  padding: 10px;
  display:grid;
  grid-template-columns: 1fr auto auto;
  align-items:center;
  gap: 8px;
}
.statName{font-family: var(--mono); color: #d8d1ff}
.statVal{font-weight: 900}
.hint{
  color: var(--muted);
  font-size: 12px;
  margin-top: 8px;
}
.formGrid{
  display:grid;
  grid-template-columns: 1fr;
  gap: 10px;
}
@media(min-width: 680px){
  .formGrid{grid-template-columns: repeat(2, minmax(0,1fr));}
}
.field span{
  display:block;
  color: var(--muted);
  font-size: 12px;
  margin-bottom: 6px;
}
input, select{
  width:100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: rgba(11,15,23,.55);
  color: var(--text);
  outline: none;
}
.stack{display:flex; flex-direction:column; gap:10px}
.item{
  border:1px solid var(--line);
  background: rgba(11,15,23,.35);
  border-radius: var(--radius2);
  padding: 10px;
}
.itemTitle{font-weight: 900; margin-bottom: 6px}
.itemMeta{color: var(--muted); font-size: 12px}
.list{display:flex; flex-direction:column; gap:10px}
.week{
  display:grid;
  grid-template-columns: 1fr;
  gap: 12px;
  align-items: stretch;
}
@media (min-width: 600px){
  .week{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (min-width: 980px){
  .week{ grid-template-columns: repeat(3, minmax(0,1fr)); }
}
@media (min-width: 1280px){
  .week{ grid-template-columns: repeat(4, minmax(0,1fr)); }
}
.dayCard{
  min-width: 170px;
  border:1px solid var(--line);
  background: rgba(11,15,23,.35);
  border-radius: var(--radius2);
  padding: 10px;
}
.dayHead{
  display:flex;
  justify-content: space-between;
  align-items:center;
  margin-bottom: 8px;
}
.dayName{font-weight: 900}
.dayDate{font-family: var(--mono); color: var(--muted); font-size: 12px}
.lock{opacity:.55}
.check{
  display:flex;
  justify-content: space-between;
  align-items:center;
  gap:10px;
  padding: 8px 0;
  border-top: 1px dashed rgba(27,41,66,.8);
}
.check:first-of-type{border-top:none}
.check label{font-size: 13px}
.check input[type="checkbox"]{width:18px;height:18px}
.kpi{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 8px;
  margin-top: 10px;
}
.kpi .k{
  border:1px solid var(--line);
  background: rgba(15,22,36,.55);
  border-radius: 12px;
  padding: 8px;
}
.kpi .k span{display:block;color:var(--muted);font-size:11px}
.kpi .k strong{font-family:var(--mono)}
.footer{
  position: fixed;
  left:0; right:0; bottom:0;
  border-top: 1px solid var(--line);
  background: rgba(11,15,23,.85);
  backdrop-filter: blur(10px);
  padding: 10px 14px;
  display:flex;
  justify-content: space-between;
  gap: 10px;
  color: var(--muted);
  font-size: 12px;
}
.status{font-family: var(--mono); color:#d8d1ff}
.summary{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 10px;
}
.summary .box{
  border:1px solid var(--line);
  background: rgba(11,15,23,.35);
  border-radius: 14px;
  padding: 10px;
}
.summary .box span{display:block;color:var(--muted);font-size:12px}
.summary .box strong{display:block;font-family:var(--mono);font-size:16px}

.dayCard{width:100%; break-inside: avoid;}

.badgeItem{
  display:flex;
  justify-content: space-between;
  align-items:center;
  gap:10px;
  padding: 12px;
  border:1px solid rgba(36,50,68,.7);
  background: rgba(15,23,34,.55);
  border-radius: 16px;
}
.badgeItem .meta{color: var(--muted); font-size: 12px; margin-top: 4px}
.badgeChip{
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(124,92,255,.55);
  background: rgba(124,92,255,.12);
  font-weight: 800;
  font-size: 12px;
}


/* ====== v2026.02 UI extensions ====== */
.topbarRow{
  display:flex;
  justify-content: space-between;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 10px;
}
.topWidgets{
  display:flex;
  gap: 8px;
  align-items:center;
  flex-wrap: wrap;
  justify-content: flex-end;
}
.cityWidget{
  display:flex;
  gap: 8px;
  align-items:center;
}
.cityWidget select{
  width:auto;
  min-width: 140px;
}

.avatarRow{
  display:flex;
  gap: 12px;
  align-items:center;
  margin-bottom: 10px;
}
.avatarBox{
  width:72px;
  height:72px;
  border-radius: 18px;
  border: 1px solid var(--line);
  background: rgba(11,15,23,.35);
  overflow:hidden;
  flex: 0 0 auto;
}
.avatarBox img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
}
.avatarActions{flex: 1 1 auto}

textarea{
  width:100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: rgba(11,15,23,.55);
  color: var(--text);
  outline:none;
  resize: vertical;
}

/* Nested cards for alerts */
.card.danger{
  border-color: rgba(255,92,122,.55);
  background: linear-gradient(180deg, rgba(255,92,122,.10), rgba(13,20,33,.85));
}
.card.danger .pill{
  border-color: rgba(255,92,122,.35);
}

/* Heatmap */
.heatmap{
  display:grid;
  grid-template-columns: repeat(7, minmax(0,1fr));
  gap: 6px;
}
.hDay{
  border-radius: 10px;
  border:1px solid var(--line);
  background: rgba(15,22,36,.55);
  padding: 10px 6px;
  text-align:center;
  font-family: var(--mono);
  font-size: 11px;
  cursor: pointer;
  user-select:none;
}
.hDay small{
  display:block;
  color: var(--muted);
  font-family: var(--sans);
  font-size: 10px;
  margin-top: 3px;
}
.hGreen{ background: rgba(60,230,165,.14); border-color: rgba(60,230,165,.35) }
.hYellow{ background: rgba(255,204,102,.14); border-color: rgba(255,204,102,.35) }
.hRed{ background: rgba(255,92,122,.12); border-color: rgba(255,92,122,.30) }
.hEmpty{ opacity: .55; cursor: default }

.singleCol{ grid-template-columns: 1fr; gap: 12px }

/* Focus Mode (quests) */
body.focusMode .topbar,
body.focusMode .footer{ display:none; }
body.focusMode .container{ max-width: 900px; padding-top: 10px; }
body.focusMode #view-quests .hint{ display:none; }
body.focusMode #view-quests #heatmapGrid,
body.focusMode #view-quests #penaltyCard,
body.focusMode #view-quests #bossActions,
body.focusMode #view-quests #weeklyHint{ display:none; }
body.focusMode #view-quests .grid.singleCol{ display:none; }
body.focusMode #view-quests #weekStrip{
  display:grid;
  grid-template-columns: 1fr;
}
body.focusMode #view-quests .dayCard{
  transform: scale(1.02);
}

@media(max-width: 560px){
  .avatarRow{flex-direction: column; align-items:flex-start;}
  .avatarBox{width:86px; height:86px;}
  .topWidgets{justify-content:flex-start;}
}

/* ---------- Beosztás (napi rutin) finomhangolás ---------- */
.scheduleDay{ padding: 12px; }
.scheduleDay.shiftN{ border-left: 4px solid rgba(255,204,102,.85); }
.scheduleDay.shiftE{ border-left: 4px solid rgba(59,220,255,.85); }
.scheduleDay.shiftP{ border-left: 4px solid rgba(57,255,20,.85); }

/* Aktív nap kiemelés (Beosztás heti nézet) */
.scheduleDay.activeDay{
  outline: 2px solid rgba(124,92,255,.55);
  box-shadow: 0 0 0 3px rgba(124,92,255,.10), 0 18px 40px rgba(0,0,0,.35);
}
.scheduleDay.activeDay .itemTitle{
  text-shadow: 0 0 12px rgba(124,92,255,.30);
}
.scheduleDay .activeTag{
  border-color: rgba(124,92,255,.55);
  background: rgba(124,92,255,.18);
  color: #efeaff;
}


.pill.shiftN{ border-color: rgba(255,204,102,.60); background: rgba(255,204,102,.14); color: #fff; }
.pill.shiftE{ border-color: rgba(59,220,255,.60); background: rgba(59,220,255,.14); color: #e8feff; }
.pill.shiftP{ border-color: rgba(57,255,20,.60); background: rgba(57,255,20,.14); color: #eaffef; }

.pill.small{ padding: 6px 10px; font-size: 11px; }

.scheduleSelect{
  width: 120px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: rgba(11,15,23,.55);
  color: var(--text);
  font-size: 12px;
}

.routineBlock{ margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--line); }
.routineTitle{ font-weight: 900; letter-spacing: .02em; }

.routineList{ display:flex; flex-direction:column; gap: 0; margin-top: 10px; }
.routineRow{
  display:grid;
  grid-template-columns: 130px 1fr auto;
  gap: 10px;
  align-items:center;
  padding: 10px 0;
  border-top: 1px dashed rgba(27,41,66,.80);
}
.routineRow:first-child{ border-top: none; }

.timeBadge{
  font-family: var(--mono);
  font-size: 12px;
  color: #d8d1ff;
  border: 1px solid rgba(124,92,255,.45);
  background: rgba(124,92,255,.10);
  padding: 7px 10px;
  border-radius: 999px;
  text-align: center;
  white-space: nowrap;
}

.routineText{ min-width: 0; }
.routineActivity{ font-size: 13px; line-height: 1.25; }
.routineNote{ color: var(--muted); font-weight: 600; }

@media (max-width: 520px){
  .routineRow{ grid-template-columns: 110px 1fr; }
  .routineRow .pill{ display:none; }
  .scheduleSelect{ width: 110px; }
}
